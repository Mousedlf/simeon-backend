{% extends 'base.html.twig' %}

{% block title %}Simeon API{% endblock %}

{% block body %}
    <div class="layout">
        <nav class="sidebar">
            <div class="toc-title">Table des mati√®res</div>

            <div class="toc-section">
                <div class="toc-section-title">Authentification</div>
                <a href="#register" class="toc-link">Cr√©er un compte</a>
                <a href="#login" class="toc-link">Obtenir un token</a>
            </div>

            <div class="toc-section">
                <div class="toc-section-title">Utilisateurs</div>
                <a href="#user-profile" class="toc-link">Profil utilisateur</a>
                <a href="#user-visibility" class="toc-link">Modifier visibilit√©</a>
                <a href="#user-username" class="toc-link">Modifier nom d'utilisateur</a>
                <a href="#user-public" class="toc-link">Utilisateurs publics</a>
            </div>

            <div class="toc-section">
                <div class="toc-section-title">Participants</div>
                <a href="#add-people" class="toc-link">Inviter des personnes</a>
                <a href="#remove-people" class="toc-link">Retirer des personnes</a>
                <a href="#get-invites" class="toc-link">Voir invitations</a>
                <a href="#accept-invite" class="toc-link">Accepter invitation</a>
                <a href="#decline-invite" class="toc-link">Refuser invitation</a>
                <a href="#change-permissions" class="toc-link">Changer permissions</a>
                <a href="#retract-invite" class="toc-link">Annuler invitation</a>
            </div>

            <div class="toc-section">
                <div class="toc-section-title">D√©penses</div>
                <a href="#expenses-all" class="toc-link">Toutes les d√©penses</a>
                <a href="#expense-add" class="toc-link">Ajouter d√©pense</a>
                <a href="#expenses-day" class="toc-link">D√©penses d'un jour</a>
                <a href="#expenses-personal" class="toc-link">D√©penses personnelles</a>
                <a href="#expenses-day-personal" class="toc-link">D√©penses jour + perso</a>
                <a href="#expense-delete" class="toc-link">Supprimer d√©pense</a>
                <a href="#expense-edit" class="toc-link">Modifier d√©pense</a>
                <a href="#expense-budget" class="toc-link">D√©finir budget</a>
            </div>

            <div class="toc-section">
                <div class="toc-section-title">Voyages</div>
                <a href="#trips-all" class="toc-link">Tous les voyages</a>
                <a href="#trip-one" class="toc-link">Un voyage</a>
                <a href="#trip-image" class="toc-link">Ajouter image</a>
                <a href="#trip-create" class="toc-link">Cr√©er voyage</a>
                <a href="#trip-delete" class="toc-link">Supprimer voyage</a>
                <a href="#trip-edit" class="toc-link">Modifier voyage</a>
                <a href="#trips-delete-multiple" class="toc-link">Supprimer plusieurs</a>
                <a href="#trip-edit-dates" class="toc-link">Modifier dates</a>
                <a href="#trip-invitable" class="toc-link">Personnes invitables</a>
            </div>

            <div class="toc-section">
                <div class="toc-section-title">Conversations</div>
                <a href="#conversation-show" class="toc-link">Une conversation</a>
                <a href="#conversations-all" class="toc-link">Toutes conversations</a>
                <a href="#message-new" class="toc-link">Nouveau message</a>
                <a href="#message-edit" class="toc-link">Modifier message</a>
            </div>

            <div class="toc-section">
                <div class="toc-section-title">Activit√©s</div>
                <a href="#activities-day" class="toc-link">Activit√©s d'un jour</a>
                <a href="#activity-add" class="toc-link">Ajouter activit√©</a>
                <a href="#activity-edit" class="toc-link">Modifier activit√©</a>
                <a href="#activity-delete" class="toc-link">Supprimer activit√©</a>
                <a href="#activities-reorder" class="toc-link">R√©organiser activit√©s</a>
            </div>

            <div class="toc-section">
                <div class="toc-section-title">Devises</div>
                <a href="#currencies-all" class="toc-link">Toutes les devises</a>
            </div>

            <div class="toc-section">
                <div class="toc-section-title">Cat√©gories</div>
                <a href="#categories-expense" class="toc-link">Cat√©gories d√©penses</a>
            </div>
        </nav>

        <main class="main-content">
            <h1>API SIMEON - Documentation</h1>

            <p>Simeon est une application con√ßue pour simplifier l'organisation et le suivi de voyages, qu'ils soient en
                solo ou en groupe. Gr√¢ce √† une interface intuitive, l'application offre :</p>
            <ul>
                <li>Gestion des itin√©raires (cr√©ation, modification, visualisation).</li>
                <li>Suivi des d√©penses avec cat√©gorisation et analyse en temps r√©el.</li>
                <li>Collaboration entre utilisateurs (voyages partag√©s, invitations, r√¥les et permissions).</li>
                <li>Gestion des messages et notifications.</li>
                <li>Et bien plus encore.</li>
            </ul>

            <p>Lien vers le d√©p√¥t Github : <a href="https://github.com/Mousedlf/simeon-backend" target="_blank">https://github.com/Mousedlf/simeon-backend</a>
            </p>
<br>
            <p><strong>Remarque :</strong><br>
                Lorsque <span class="auth">üîí Auth requis</span> est indiqu√©, vous devez inclure un Bearer Token dans
                l'en-t√™te Authorization de votre requ√™te.</p>


            <h2 id="auth">Authentification</h2>
            <div class="endpoint" id="register">
                <div class="method-line">
                    <span class="method post">POST</span>
                    <span class="url">/register</span>
                </div>
                <div class="endpoint-name">Cr√©er un compte</div>
                <div class="description">Enregistrer un nouveau utilisateur dans le syst√®me</div>
                <div class="code">
                    {
                    "username": "test",
                    "email": "test@mail.com",
                    "password": "test"
                    }
                </div>
            </div>

            <div class="endpoint" id="login">
                <div class="method-line">
                    <span class="method post">POST</span>
                    <span class="url">/api/login_check</span>
                </div>
                <div class="endpoint-name">Obtenir un token</div>
                <div class="description">Se connecter et r√©cup√©rer un JWT pour les requ√™tes authentifi√©es</div>
                <div class="code">
                    {
                    "username": "test",
                    "password": "test"
                    }
                </div>
            </div>

            <h2 id="user">Utilisateurs</h2>

            <div class="endpoint" id="user-profile">
                <div class="method-line">
                    <span class="method get">GET</span>
                    <span class="url">/api/user/profile</span>
                    <span class="auth">üîí Auth requis</span>
                </div>
                <div class="endpoint-name">Profil utilisateur</div>
                <div class="description">R√©cup√©rer les informations du profil de l'utilisateur connect√©</div>
            </div>

            <div class="endpoint" id="user-visibility">
                <div class="method-line">
                    <span class="method get">GET</span>
                    <span class="url">/api/user/{id}/edit/visibility</span>
                    <span class="auth">üîí Auth requis</span>
                </div>
                <div class="endpoint-name">Modifier la visibilit√©</div>
                <div class="description">Changer la visibilit√© du profil utilisateur</div>
            </div>

            <div class="endpoint" id="user-username">
                <div class="method-line">
                    <span class="method post">POST</span>
                    <span class="url">/api/user/{id}/edit/username</span>
                    <span class="auth">üîí Auth requis</span>
                </div>
                <div class="endpoint-name">Modifier le nom d'utilisateur</div>
                <div class="description">Changer le nom d'utilisateur du compte</div>
                <div class="code">
                    {
                    "username": "nouveau_nom"
                    }
                </div>
            </div>

            <div class="endpoint" id="user-public">
                <div class="method-line">
                    <span class="method get">GET</span>
                    <span class="url">/api/user/all/public</span>
                </div>
                <div class="endpoint-name">Utilisateurs publics</div>
                <div class="description">R√©cup√©rer la liste de tous les utilisateurs publics</div>
            </div>

            <h2 id="participants">Participants</h2>

            <div class="endpoint" id="add-people">
                <div class="method-line">
                    <span class="method post">POST</span>
                    <span class="url">/api/trip/{id}/add-people</span>
                    <span class="auth">üîí Auth requis</span>
                </div>
                <div class="endpoint-name">Inviter des personnes</div>
                <div class="description">Inviter des personnes √† rejoindre un voyage</div>
                <div class="code">
                    {
                    "message": "coucou",
                    "people": [
                        {
                        "userId": 7,
                        "statusId": 2
                        },
                        {
                        "userId": 3,
                        "statusId": 1
                        },
                    ]}
                </div>
            </div>

            <div class="endpoint" id="remove-people">
                <div class="method-line">
                    <span class="method post">POST</span>
                    <span class="url">/api/trip/{id}/remove-people</span>
                    <span class="auth">üîí Auth requis</span>
                </div>
                <div class="endpoint-name">Retirer des personnes</div>
                <div class="description">Retirer des personnes d'un voyage</div>
                <div class="code">
                    {
                    "peopleIds": [6, 5]
                    }
                </div>
            </div>

            <div class="endpoint" id="get-invites">
                <div class="method-line">
                    <span class="method get">GET</span>
                    <span class="url">/api/invite/all/user/{id}</span>
                    <span class="auth">üîí Auth requis</span>
                </div>
                <div class="endpoint-name">Voir les invitations</div>
                <div class="description">R√©cup√©rer toutes les invitations d'un utilisateur</div>
            </div>

            <div class="endpoint" id="accept-invite">
                <div class="method-line">
                    <span class="method get">GET</span>
                    <span class="url">/api/invite/{id}/accept</span>
                    <span class="auth">üîí Auth requis</span>
                </div>
                <div class="endpoint-name">Accepter invitation</div>
                <div class="description">Accepter une invitation √† un voyage</div>
            </div>

            <div class="endpoint" id="decline-invite">
                <div class="method-line">
                    <span class="method get">GET</span>
                    <span class="url">/api/invite/{id}/decline</span>
                    <span class="auth">üîí Auth requis</span>
                </div>
                <div class="endpoint-name">Refuser invitation</div>
                <div class="description">Refuser une invitation √† un voyage</div>
            </div>

            <div class="endpoint" id="change-permissions">
                <div class="method-line">
                    <span class="method post">POST</span>
                    <span class="url">/api/trip/{id}/change-permissions</span>
                    <span class="auth">üîí Auth requis</span>
                </div>
                <div class="endpoint-name">Changer permissions</div>
                <div class="description">Modifier les permissions des participants d'un voyage</div>
                <div class="code">
                    {
                    "participants": [
                        {
                        "userId": 1,
                        "statusId": 3
                        }
                    ]}
                </div>
            </div>

            <div class="endpoint" id="retract-invite">
                <div class="method-line">
                    <span class="method get">GET</span>
                    <span class="url">/api/invite/{id}/retract</span>
                    <span class="auth">üîí Auth requis</span>
                </div>
                <div class="endpoint-name">Annuler invitation</div>
                <div class="description">Annuler une invitation envoy√©e</div>
            </div>

            <h2 id="expense">D√©penses</h2>

            <div class="endpoint" id="expenses-all">
                <div class="method-line">
                    <span class="method get">GET</span>
                    <span class="url">/api/expense/all/trip/{id}</span>
                    <span class="auth">üîí Auth requis</span>
                </div>
                <div class="endpoint-name">Toutes les d√©penses</div>
                <div class="description">R√©cup√©rer toutes les d√©penses d'un voyage</div>
            </div>

            <div class="endpoint" id="expense-add">
                <div class="method-line">
                    <span class="method post">POST</span>
                    <span class="url">/api/expense/new/trip/{id}</span>
                    <span class="auth">üîí Auth requis</span>
                </div>
                <div class="endpoint-name">Ajouter une d√©pense</div>
                <div class="description">Cr√©er une nouvelle d√©pense pour un voyage</div>
                <div class="code">
                    {
                    "dayOfTrip": null,
                    "amountLocalCurrency": 1.25,
                    "currency": 1,
                    "divide": false,
                    "name": "th√©",
                    "paidBy": 4,
                    "divideBetween": [7, 4],
                    "paymentMethod": null,
                    "personal": true,
                    "category": 2
                    }
                </div>
            </div>

            <div class="endpoint" id="expenses-day">
                <div class="method-line">
                    <span class="method get">GET</span>
                    <span class="url">/api/expense/all/trip/{id}/day/{day}</span>
                    <span class="auth">üîí Auth requis</span>
                </div>
                <div class="endpoint-name">D√©penses d'un jour</div>
                <div class="description">R√©cup√©rer toutes les d√©penses communes d'un jour sp√©cifique</div>
            </div>

            <div class="endpoint" id="expenses-personal">
                <div class="method-line">
                    <span class="method get">GET</span>
                    <span class="url">/api/expense/all/trip/{id}/personal</span>
                    <span class="auth">üîí Auth requis</span>
                </div>
                <div class="endpoint-name">D√©penses personnelles</div>
                <div class="description">R√©cup√©rer toutes les d√©penses personnelles d'un voyage</div>
            </div>

            <div class="endpoint" id="expenses-day-personal">
                <div class="method-line">
                    <span class="method get">GET</span>
                    <span class="url">/api/expense/all/trip/{id}/day/{day}/with-personal</span>
                    <span class="auth">üîí Auth requis</span>
                </div>
                <div class="endpoint-name">D√©penses jour + personnelles</div>
                <div class="description">R√©cup√©rer toutes les d√©penses (communes et personnelles) d'un jour</div>
            </div>

            <div class="endpoint" id="expense-delete">
                <div class="method-line">
                    <span class="method delete">DELETE</span>
                    <span class="url">/api/expense/{id}/delete</span>
                    <span class="auth">üîí Auth requis</span>
                </div>
                <div class="endpoint-name">Supprimer d√©pense</div>
                <div class="description">Supprimer une d√©pense existante</div>
            </div>

            <div class="endpoint" id="expense-edit">
                <div class="method-line">
                    <span class="method put">PUT</span>
                    <span class="url">/api/expense/{id}/edit</span>
                    <span class="auth">üîí Auth requis</span>
                </div>
                <div class="endpoint-name">Modifier d√©pense</div>
                <div class="description">Modifier une d√©pense existante</div>
                <div class="code">
                    {
                    "dayOfTrip": null,
                    "amountLocalCurrency": 1.25,
                    "currency": 1,
                    "divide": false,
                    "name": "th√©",
                    "paidBy": 4,
                    "divideBetween": [7, 4],
                    "paymentMethod": null,
                    "personal": true,
                    "category": 2
                    }
                </div>
            </div>

            <div class="endpoint" id="expense-budget">
                <div class="method-line">
                    <span class="method put">PUT</span>
                    <span class="url">/api/expense/trip/{id}/budget</span>
                    <span class="auth">üîí Auth requis</span>
                </div>
                <div class="endpoint-name">D√©finir budget</div>
                <div class="description">D√©finir le budget personnel pour un voyage</div>
                <div class="code">
                    {
                    "budget": 465
                    }
                </div>
            </div>

            <h2 id="trip">Voyages</h2>

            <div class="endpoint" id="trips-all">
                <div class="method-line">
                    <span class="method get">GET</span>
                    <span class="url">/api/trip/all/{userId}</span>
                    <span class="auth">üîí Auth requis</span>
                </div>
                <div class="endpoint-name">Tous les voyages</div>
                <div class="description">R√©cup√©rer tous les voyages d'un utilisateur</div>
            </div>

            <div class="endpoint" id="trip-one">
                <div class="method-line">
                    <span class="method get">GET</span>
                    <span class="url">/api/trip/{id}</span>
                    <span class="auth">üîí Auth requis</span>
                </div>
                <div class="endpoint-name">Un voyage</div>
                <div class="description">R√©cup√©rer les d√©tails d'un voyage sp√©cifique</div>
            </div>

            <div class="endpoint" id="trip-image">
                <div class="method-line">
                    <span class="method post">POST</span>
                    <span class="url">/api/trip/{id}/image</span>
                    <span class="auth">üîí Auth requis</span>
                </div>
                <div class="endpoint-name">Ajouter image</div>
                <div class="description">Ajouter une image √† un voyage (multipart/form-data)</div>
            </div>

            <div class="endpoint" id="trip-create">
                <div class="method-line">
                    <span class="method post">POST</span>
                    <span class="url">/api/trip/new</span>
                    <span class="auth">üîí Auth requis</span>
                </div>
                <div class="endpoint-name">Cr√©er voyage</div>
                <div class="description">Cr√©er un nouveau voyage</div>
                <div class="code">
                    {
                    "name": "Mallorca 2.0",
                    "description": "repos, plage et allemands",
                    "startDate": "2025-06-01",
                    "endDate": "2025-06-02",
                    "public": false
                    }
                </div>
            </div>

            <div class="endpoint" id="trip-delete">
                <div class="method-line">
                    <span class="method delete">DELETE</span>
                    <span class="url">/api/trip/{id}/delete</span>
                    <span class="auth">üîí Auth requis</span>
                </div>
                <div class="endpoint-name">Supprimer voyage</div>
                <div class="description">Supprimer un voyage existant</div>
            </div>

            <div class="endpoint" id="trip-edit">
                <div class="method-line">
                    <span class="method put">PUT</span>
                    <span class="url">/api/trip/{id}/edit</span>
                    <span class="auth">üîí Auth requis</span>
                </div>
                <div class="endpoint-name">Modifier voyage</div>
                <div class="description">Modifier les informations textuelles d'un voyage</div>
                <div class="code">
                    {
                    "name": "Francfort",
                    "description": "S√©jour √† la maison"
                    }
                </div>
            </div>

            <div class="endpoint" id="trips-delete-multiple">
                <div class="method-line">
                    <span class="method delete">DELETE</span>
                    <span class="url">/api/trip/delete</span>
                    <span class="auth">üîí Auth requis</span>
                </div>
                <div class="endpoint-name">Supprimer plusieurs voyages</div>
                <div class="description">Supprimer plusieurs voyages en une fois</div>
                <div class="code">
                    {
                    "tripIds": [3, 4]
                    }
                </div>
            </div>

            <div class="endpoint" id="trip-edit-dates">
                <div class="method-line">
                    <span class="method put">PUT</span>
                    <span class="url">/api/trip/{id}/edit-dates</span>
                    <span class="auth">üîí Auth requis</span>
                </div>
                <div class="endpoint-name">Modifier dates</div>
                <div class="description">Modifier les dates de d√©but et de fin d'un voyage</div>
                <div class="code">
                    {
                    "startDate": "2025-09-10",
                    "endDate": "2025-09-20"
                    }
                </div>
            </div>

            <div class="endpoint" id="trip-invitable">
                <div class="method-line">
                    <span class="method get">GET</span>
                    <span class="url">/api/trip/{id}/invitable-people</span>
                    <span class="auth">üîí Auth requis</span>
                </div>
                <div class="endpoint-name">Personnes invitables</div>
                <div class="description">R√©cup√©rer la liste des personnes pouvant √™tre invit√©es √† un voyage</div>
            </div>

            <h2 id="conversations">Conversations</h2>

            <div class="endpoint" id="conversation-show">
                <div class="method-line">
                    <span class="method get">GET</span>
                    <span class="url">/api/conversation/{id}</span>
                    <span class="auth">üîí Auth requis</span>
                </div>
                <div class="endpoint-name">Une conversation</div>
                <div class="description">Afficher une conversation sp√©cifique</div>
            </div>

            <div class="endpoint" id="conversations-all">
                <div class="method-line">
                    <span class="method get">GET</span>
                    <span class="url">/api/conversation/all</span>
                    <span class="auth">üîí Auth requis</span>
                </div>
                <div class="endpoint-name">Toutes les conversations</div>
                <div class="description">R√©cup√©rer toutes les conversations d'un utilisateur</div>
            </div>

            <div class="endpoint" id="message-new">
                <div class="method-line">
                    <span class="method post">POST</span>
                    <span class="url">/api/conversation/{id}/message/new</span>
                    <span class="auth">üîí Auth requis</span>
                </div>
                <div class="endpoint-name">Nouveau message</div>
                <div class="description">Envoyer un nouveau message dans une conversation</div>
                <div class="code">
                    {
                    "content": "le contenu du message"
                    }
                </div>
            </div>

            <div class="endpoint" id="message-edit">
                <div class="method-line">
                    <span class="method put">PUT</span>
                    <span class="url">/api/conversation/{id}/message/{messageId}/edit</span>
                    <span class="auth">üîí Auth requis</span>
                </div>
                <div class="endpoint-name">Modifier message</div>
                <div class="description">Modifier un message existant dans une conversation</div>
                <div class="code">
                    {
                    "content": "contenu modifi√©"
                    }
                </div>
            </div>

            <h2 id="activities">Activit√©s</h2>

            <div class="endpoint" id="activities-day">
                <div class="method-line">
                    <span class="method get">GET</span>
                    <span class="url">/api/trip/{tripId}/day/{day}</span>
                    <span class="auth">üîí Auth requis</span>
                </div>
                <div class="endpoint-name">Activit√©s d'un jour</div>
                <div class="description">R√©cup√©rer les activit√©s d'une journ√©e sp√©cifique</div>
            </div>

            <div class="endpoint" id="activity-add">
                <div class="method-line">
                    <span class="method post">POST</span>
                    <span class="url">/api/activity/new/trip/{tripId}/day/{day}</span>
                    <span class="auth">üîí Auth requis</span>
                </div>
                <div class="endpoint-name">Ajouter activit√©</div>
                <div class="description">Ajouter une nouvelle activit√© √† une journ√©e</div>
                <div class="code">
                    {
                    "name": "Tour eiffel",
                    "address": "Av. Gustave Eiffel, 75007 Paris",
                    "category": 20,
                    "longitude": 2.2945006,
                    "latitude": 48.8582599,
                    "note": "classique"
                    }
                </div>
            </div>

            <div class="endpoint" id="activity-edit">
                <div class="method-line">
                    <span class="method put">PUT</span>
                    <span class="url">/api/activity/edit/{id}/trip/{tripId}/day/{day}</span>
                    <span class="auth">üîí Auth requis</span>
                </div>
                <div class="endpoint-name">Modifier activit√©</div>
                <div class="description">Modifier une activit√© existante</div>
                <div class="code">
                    {
                    "name": "Bourse du Commerce",
                    "address": "2 Rue de Viarmes, 75001 Paris",
                    "category": 17,
                    "longitude": 2.3428364,
                    "latitude": 48.8628174,
                    "note": "bols in the water"
                    }
                </div>
            </div>

            <div class="endpoint" id="activity-delete">
                <div class="method-line">
                    <span class="method delete">DELETE</span>
                    <span class="url">/api/activity/{id}/trip/{tripId}/delete</span>
                    <span class="auth">üîí Auth requis</span>
                </div>
                <div class="endpoint-name">Supprimer activit√©</div>
                <div class="description">Supprimer une activit√© d'un voyage</div>
            </div>

            <div class="endpoint" id="activities-reorder">
                <div class="method-line">
                    <span class="method post">POST</span>
                    <span class="url">/api/activity/trip/{tripId}/day/{day}/reorder</span>
                    <span class="auth">üîí Auth requis</span>
                </div>
                <div class="endpoint-name">R√©organiser activit√©s</div>
                <div class="description">R√©organiser l'ordre des activit√©s d'une journ√©e</div>
                <div class="code">
                    {
                    "order": [2, 1]
                    }
                </div>
            </div>

            <h2 id="currencies">Devises</h2>

            <div class="endpoint" id="currencies-all">
                <div class="method-line">
                    <span class="method get">GET</span>
                    <span class="url">/api/currency/all</span>
                    <span class="auth">üîí Auth requis</span>
                </div>
                <div class="endpoint-name">Toutes les devises</div>
                <div class="description">R√©cup√©rer la liste de toutes les devises disponibles</div>
            </div>

            <h2 id="categories">Cat√©gories</h2>

            <div class="endpoint" id="categories-expense">
                <div class="method-line">
                    <span class="method get">GET</span>
                    <span class="url">/api/category/all/expense</span>
                    <span class="auth">üîí Auth requis</span>
                </div>
                <div class="endpoint-name">Cat√©gories de d√©penses</div>
                <div class="description">R√©cup√©rer toutes les cat√©gories disponibles pour les d√©penses</div>
            </div>

        </main>
    </div>

{% endblock %}
